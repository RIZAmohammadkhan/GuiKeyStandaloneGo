<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activity Logs - Page {{.CurrentPage}}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Activity Logs</h1>
        <p>Server PeerID: <code>{{.ServerPeerID}}</code></p>
        <p>Displaying page {{.CurrentPage}} of {{.TotalPages}}. Total Events: {{.TotalEvents}}.</p>

        {{if not .Events}}
            <p>No log events found.</p>
        {{else}}
            <div class="log-entry-list">
                {{range .Events}}
                    <div class="log-entry">
                        <h3>{{.ApplicationName}} <span class="app-title">- "{{.InitialWindowTitle}}"</span></h3>
                        <p class="metadata">
                            <strong>Event ID:</strong> {{.ID}} | 
                            <strong>Client ID:</strong> {{.ClientID_Short}} |
                            <strong>Session Start:</strong> {{.SessionStartStr}} | 
                            <strong>Session End:</strong> {{.SessionEndStr}} |
                            <strong>Log Timestamp:</strong> {{.LogTimestampStr}} |
                            <strong>Schema:</strong> v{{.SchemaVersion}}
                        </p>
                        {{with .EventData.ApplicationActivity}}
                            <div class="typed-text">
                                <h4>Typed Text:</h4>
                                <pre>{{if .TypedText}}{{.TypedText}}{{else}}[No text typed]{{end}}</pre>
                            </div>
                        {{else}}
                            <p><em>Non-ApplicationActivity event or no data.</em></p>
                        {{end}}
                    </div>
                {{end}}
            </div>

            <div class="pagination">
                {{if gt .CurrentPage 1}}
                    <a href="/logs?page={{.PrevPage}}&page_size={{.PageSize}}">« Previous</a>
                {{else}}
                    <span class="disabled">« Previous</span>
                {{end}}

                <span>
                    Page {{.CurrentPage}} of {{.TotalPages}}
                </span>

                {{if lt .CurrentPage .TotalPages}}
                    <a href="/logs?page={{.NextPage}}&page_size={{.PageSize}}">Next »</a>
                {{else}}
                    <span class="disabled">Next »</span>
                {{end}}
            </div>
        {{end}}
    </div>
</body>
</html>